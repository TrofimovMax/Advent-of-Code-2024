# --- День 16: Лабиринт Оленей ---

Настало время Олимпийских игр среди оленей! В этом году главным событием является **Лабиринт Оленей**, где участники соревнуются за **наименьший балл**.

Вы и Историки приходите искать Вождя как раз перед началом соревнований. Немного понаблюдать за игрой не помешает, правда?

Олени стартуют на **стартовой клетке** (обозначена `S`), смотря на Восток, и должны добраться до **финишной клетки** (обозначена `E`). Они могут двигаться **вперёд на одну клетку** (увеличивая свой счёт на **1 балл**), но **не могут двигаться в стены** (обозначены `#`). Также они могут поворачиваться **на 90 градусов по часовой или против часовой стрелки** (увеличивая свой счёт на **1000 баллов**).

Чтобы найти лучшее место для наблюдения, вы берёте карту лабиринта (ваш ввод для задачи). Например:

```
###############
#.......#....E#
#.#.###.#.###.#
#.....#.#...#.#
#.###.#####.#.#
#.#.#.......#.#
#.#.#####.###.#
#...........#.#
###.#.#####.#.#
#...#.....#.#.#
#.#.#.###.#.#.#
#.....#...#.#.#
#.###.#.#.#.#.#
#S..#.....#...#
###############
```

В этом лабиринте существует много путей, но любой из **лучших маршрутов** даёт **сумму в 7036 баллов**. Это достигается за **36 шагов вперёд** и **7 поворотов на 90 градусов**:

```

###############
#.......#....E#
#.#.###.#.###^#
#.....#.#...#^#
#.###.#####.#^#
#.#.#.......#^#
#.#.#####.###^#
#..>>>>>>>>v#^#
###^#.#####v#^#
#>>^#.....#v#^#
#^#.#.###.#v#^#
#^....#...#v#^#
#^###.#.#.#v#^#
#S..#.....#>>^#
###############
```
 
Вот второй пример лабиринта:

```
#################
#...#...#...#..E#
#.#.#.#.#.#.#.#.#
#.#.#.#...#...#.#
#.#.#.#.###.#.#.#
#...#.#.#.....#.#
#.#.#.#.#.#####.#
#.#...#.#.#.....#
#.#.#####.#.###.#
#.#.#.......#...#
#.#.###.#####.###
#.#.#...#.....#.#
#.#.#.#####.###.#
#.#.#.........#.#
#.#.#.#########.#
#S#.............#
#################
```


В этом лабиринте **лучшие маршруты** дают сумму в **11048 баллов**. Один из таких путей выглядит следующим образом:

```
#################
#...#...#...#..E#
#.#.#.#.#.#.#.#^#
#.#.#.#...#...#^#
#.#.#.#.###.#.#^#
#>>v#.#.#.....#^#
#^#v#.#.#.#####^#
#^#v..#.#.#>>>>^#
#^#v#####.#^###.#
#^#v#..>>>>^#...#
#^#v###^#####.###
#^#v#>>^#.....#.#
#^#v#^#####.###.#
#^#v#^........#.#
#^#v#^#########.#
#S#>>^..........#
#################
```


**Важно:**
Путь, показанный выше, включает **поворот на 90 градусов** в самом начале, чтобы развернуть оленя с Востока на Север.

---

### **Задача**
Проанализируйте предоставленную карту лабиринта. Какой **наименьший балл** может получить олень на пути от `S` до `E`?

---

# --- Часть Вторая ---

Теперь, когда вы знаете, как выглядят лучшие маршруты, вы можете найти **лучшее место для наблюдения**.

Каждая не-стена (плитка `S`, `.`, или `E`) оборудована местами для сидения вдоль краёв плитки. Определение того, какая из этих плиток будет **лучшим местом**, зависит от множества факторов (насколько удобны сиденья, насколько далеко находятся туалеты, закрывает ли вид колонна и т.д.). Однако **самый важный фактор** — находится ли плитка на **одном из лучших путей через лабиринт**. Если вы сядете где-нибудь ещё, вы пропустите всё действие!

Таким образом, вам нужно определить, **какие плитки** являются частью **любого из лучших маршрутов** через лабиринт, включая начальную плитку `S` и конечную плитку `E`.

---

### **Пример 1**

В первом примере **45 плиток** (обозначены `O`) являются частью как минимум одного из лучших маршрутов через лабиринт:

```
###############
#.......#....O#
#.#.###.#.###O#
#.....#.#...#O#
#.###.#####.#O#
#.#.#.......#O#
#.#.#####.###O#
#..OOOOOOOOO#O#
###O#O#####O#O#
#OOO#O....#O#O#
#O#O#O###.#O#O#
#OOOOO#...#O#O#
#O###.#.#.#O#O#
#O..#.....#OOO#
###############
```


---

### **Пример 2**

Во втором примере **64 плитки** являются частью как минимум одного из лучших маршрутов:

```
#################
#...#...#...#..O#
#.#.#.#.#.#.#.#O#
#.#.#.#...#...#O#
#.#.#.#.###.#.#O#
#OOO#.#.#.....#O#
#O#O#.#.#.#####O#
#O#O..#.#.#OOOOO#
#O#O#####.#O###O#
#O#O#..OOOOO#OOO#
#O#O###O#####O###
#O#O#OOO#..OOO#.#
#O#O#O#####O###.#
#O#O#OOOOOOO..#.#
#O#O#O#########.#
#O#OOO..........#
#################
```


---

### **Задача**

Проанализируйте вашу карту лабиринта. **Сколько плиток** являются частью хотя бы одного из **лучших путей** через лабиринт?

---
