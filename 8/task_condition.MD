### --- День 8: Резонансная коллинеарность ---

Вы оказываетесь на крыше сверхсекретной установки Пасхального Кролика.

Пока Историки заняты своим делом, вы обращаете внимание на знакомую огромную антенну. К вашему удивлению, кажется, её перенастроили так, чтобы она излучала сигнал, заставляющий людей на 0.1% чаще покупать поддельный средненький шоколад бренда Пасхального Кролика в качестве рождественского подарка! Немыслимо!

Окидывая взглядом город, вы замечаете, что таких антенн на самом деле много. Каждая антенна настроена на определённую частоту, обозначаемую одной строчной буквой, прописной буквой или цифрой. Вы создаёте карту (входные данные задачи) этих антенн. Например:

```
............
........0...
.....0......
.......0....
....0.......
......A.....
............
............
........A...
.........A..
............
............
```


Сигнал оказывает своё коварное воздействие лишь в определённых антинодах, основанных на резонансных частотах антенн. В частности, антинода возникает в любой точке, которая идеально выстроена в линию с двумя антеннами одинаковой частоты — но только тогда, когда одна из антенн в два раза дальше от этой точки, чем другая. Это означает, что для каждой пары антенн с одинаковой частотой существует две антиноды — по одной с каждой стороны.

Например, для двух антенн с частотой `a`, они создают две антиноды, отмеченные `#`:

```
..........
...#......
..........
....a.....
..........
.....a....
..........
......#...
..........
..........
```

Добавление третьей антенны с той же частотой создаёт несколько дополнительных антинод. Теоретически это добавило бы четыре антиноды, но две из них выходят за правый край карты, поэтому фактически добавляется только две:

```
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......#...
..........
..........
```

Антенны с разными частотами не создают антинод; `A` и `a` считаются разными частотами. Однако антиноды могут возникать и в точках, где уже стоят антенны. В этой диаграмме одинокая антенна с частотой прописной `A` не создаёт антинод, но в её месте есть антинода для частоты `a`:

```
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......A...
..........
..........
```


В первом примере есть антенны с двумя разными частотами, поэтому антиноды, которые они создают, выглядят так (плюс антинода, накладывающаяся на верхнюю антенну частоты `A`):

```
......#....#
...#....0...
....#0....#.
..#....0....
....0....#..
.#....A.....
...#........
#......#....
........A...
.........A..
..........#.
..........#.
```


Поскольку верхняя антенна с частотой `A` пересекается с антинодой частоты `0`, в пределах границ карты имеется в общей сложности 14 уникальных точек, содержащих антиноду.

Вычислите влияние сигнала. Сколько уникальных точек в пределах границ карты содержат антиноду?

### --- Часть Вторая ---

Наблюдая за вашей работой, один из Историков спрашивает, учли ли вы влияние резонансных гармоник в ваших расчётах.

Упс!

После обновления вашей модели выясняется, что антинода возникает в любой позиции сетки, которая точно выстроена в линию хотя бы с двумя антеннами одной и той же частоты, независимо от расстояния. Это означает, что некоторые из новых антинод появятся и в позициях, где стоят антенны (если эта антенна не единственная с данной частотой).

Таким образом, эти три антенны с частотой `T` теперь создают множество антинод:

```
T....#....
...T......
.T....#...
.........#
..#.......
..........
...#......
..........
....#.....
..........
```


Фактически, все три антенны с частотой `T` также выстроены в линию с другими двумя антеннами, так что каждая из них также является антинодой! Это увеличивает общее число антинод в данном примере до 9.

Изначальный пример теперь имеет 34 антиноды, включая те, что появляются на каждой антенне:

```
##....#....#
.#.#....0...
..#.#0....#.
..##...0....
....0....#..
.#...#A....#
...#..#.....
#....#.#....
..#.....A...
....#....A..
.#........#.
...#......##
```

Вычислите влияние сигнала, используя обновлённую модель. Сколько уникальных позиций внутри границ карты содержат антиноду?

