# --- День 19: Раскладка полотенец (Linen Layout) ---

Сегодня Историки привели вас к горячим источникам на острове Шестерёнок! Очень подозрительно, что абсолютно ничего не идёт не так, пока они начинают тщательно исследовать обширное поле спиралей.

Неужели это наконец ваш шанс посетить онсэн по соседству? Только один способ узнать.

После короткого разговора с сотрудниками стойки регистрации онсэна вы узнаёте, что у вас нет нужных денег, чтобы оплатить входной билет. Однако, прежде чем вы уйдёте, сотрудники привлекают ваше внимание. Очевидно, они слышали, как вы помогли в горячих источниках, и готовы пойти на сделку: если вы поможете им разложить полотенца, они пустят вас бесплатно!

Каждое полотенце в этом онсэне отмечено узором из цветных полос. Существует всего несколько узоров, но для любого конкретного узора сотрудники могут предоставить столько полотенец с этим узором, сколько нужно. Каждая полоса может быть белой (`w`), синей (`u`), чёрной (`b`), красной (`r`) или зелёной (`g`). Например, полотенце с узором `ggr` будет иметь зелёную полосу, затем ещё одну зелёную полосу, а затем красную полосу, в этом порядке. (Вы не можете перевернуть узор, потому что логотип онсэна будет перевёрнут.)

**Официальный Эксперт по Брендингу Онсэна** составил список дизайнов — каждый из них является длинной последовательностью цветов полос, которые они хотели бы отобразить. Вы можете использовать любые полотенца, но все полосы полотенец должны точно соответствовать желаемому дизайну. Например, чтобы отобразить дизайн `rgrgr`, вы можете использовать два полотенца с узором `rg` и одно полотенце с узором `r`, или полотенце с узором `rgr` и полотенце с узором `gr`, или даже одно большое полотенце с узором `rgrgr` (если такой узор доступен).

### Входные данные

Сначала соберите все доступные узоры полотенец и список желаемых дизайнов (ваш входной файл). Например:

```
r, wr, b, g, bwu, rb, gb, br

brwrr
bggr
gbbr
rrbgbr
ubwu
bwurrg
brgr
bbrgwb
```

Первая строка указывает доступные узоры полотенец; в этом примере онсэн имеет неограниченное количество полотенец с одной красной полосой (`r`), неограниченное количество полотенец с белой полосой, затем красной полосой (`wr`), и так далее.

После пустой строки остальные строки описывают каждый дизайн, который онсэн хотел бы отобразить. В этом примере первый дизайн (`brwrr`) указывает, что онсэн хочет отобразить чёрную полосу, затем красную полосу, затем белую полосу и две красные полосы, в этом порядке.

### Примеры

Не все дизайны возможны с доступными полотенцами. В приведённом выше примере дизайны возможны или невозможны следующим образом:

- `brwrr` можно создать с помощью полотенец `br`, затем `wr`, и, наконец, `r`.
- `bggr` можно создать с помощью полотенец `b`, двух `g`, и затем `r`.
- `gbbr` можно создать с помощью полотенец `gb` и `br`.
- `rrbgbr` можно создать с помощью `r`, `rb`, `g`, и `br`.
- `ubwu` невозможно.
- `bwurrg` можно создать с помощью `bwu`, `r`, `r`, и `g`.
- `brgr` можно создать с помощью `br`, `g`, и `r`.
- `bbrgwb` невозможно.

В этом примере 6 из 8 дизайнов можно реализовать с доступными узорами полотенец.

### Ваша задача

Сколько дизайнов возможно реализовать?

# --- Часть Вторая ---

Сотрудникам не очень нравятся некоторые раскладки полотенец, которые вы придумали. Чтобы избежать бесконечного цикла перестановок, может быть, стоит просто дать им **все возможные варианты**.

Вот все способы, которыми можно создать дизайны из приведённого выше примера:

- **brwrr** можно собрать двумя способами:
  - `b`, `r`, `wr`, `r`
  - `br`, `wr`, `r`

- **bggr** можно собрать только одним способом:
  - `b`, `g`, `g`, `r`

- **gbbr** можно собрать четырьмя способами:
  - `g`, `b`, `b`, `r`
  - `g`, `b`, `br`
  - `gb`, `b`, `r`
  - `gb`, `br`

- **rrbgbr** можно собрать шестью способами:
  - `r`, `r`, `b`, `g`, `b`, `r`
  - `r`, `r`, `b`, `g`, `br`
  - `r`, `r`, `b`, `gb`, `r`
  - `r`, `rb`, `g`, `b`, `r`
  - `r`, `rb`, `g`, `br`
  - `r`, `rb`, `gb`, `r`

- **bwurrg** можно собрать только одним способом:
  - `bwu`, `r`, `r`, `g`

- **brgr** можно собрать двумя способами:
  - `b`, `r`, `g`, `r`
  - `br`, `g`, `r`

- **ubwu** и **bbrgwb** всё ещё **невозможно собрать**.

Сложив все возможные способы, которыми полотенца могут быть использованы для создания желаемых дизайнов, мы получаем:  
**16 (2 + 1 + 4 + 6 + 1 + 2)**.

### Ваша задача

Определите общее количество различных способов, которыми полотенца могут быть использованы для создания каждого дизайна. Что получится, если вы сложите количество способов для каждого дизайна?

