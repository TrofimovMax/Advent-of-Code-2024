# --- День 17: Хроно-пространственный компьютер ---

Историки нажимают кнопку на своём странном устройстве, и на этот раз у вас появляется ощущение свободного падения.

"Критическая ситуация", — объявляет устройство знакомым голосом. "Процесс загрузки завершился сбоем. Инициализация отладчика..."

Небольшое портативное устройство внезапно разворачивается в целый компьютер! Историки нервно оглядываются, прежде чем один из них кидает его вам.

Это, кажется, **3-битный компьютер**: его программа состоит из чисел размером 3 бита (от 0 до 7), например, `0,1,2,3`. У компьютера также есть три **регистра** с именами `A`, `B` и `C`, но они не ограничены 3 битами и могут хранить **любое целое число**.

---

## **Архитектура компьютера**

1. **Инструкции** определяются 3-битными числами, называемыми **кодами операций (opcode)**.
2. Каждая инструкция использует **операнд**, который представляет собой 3-битное число после кода операции.

Компьютер использует **указатель инструкций** для определения текущей позиции в программе. Он начинает с 0 (первый элемент) и увеличивается на **2** после выполнения каждой инструкции (для перехода через opcode и операнд). Если указатель выходит за пределы программы, выполнение останавливается.

Пример: программа `0,1,2,3` выполняет инструкции:
- `0` с операндом `1`
- `2` с операндом `3`
- Затем останавливается.

---

## **Типы операндов**

Существуют **два типа операндов**:
- **Литеральные операнды**: значение равно самому числу.
- **Комбинированные операнды**: зависят от значения:
  - `0-3`: литеральные значения `0-3`.
  - `4`: значение регистра **A**.
  - `5`: значение регистра **B**.
  - `6`: значение регистра **C**.
  - `7`: зарезервировано и **не встречается** в валидных программах.

---

## **Инструкции**

Компьютер поддерживает **8 инструкций**:

1. **`adv` (код 0)**  
   Делит значение регистра **A** на 2 в степени операнда.  
   Результат **округляется вниз** и записывается в регистр **A**.

2. **`bxl` (код 1)**  
   Выполняет **побитовое XOR** между регистром **B** и операндом.  
   Результат сохраняется в регистре **B**.

3. **`bst` (код 2)**  
   Вычисляет значение операнда **по модулю 8** и записывает его в регистр **B**.

4. **`jnz` (код 3)**  
   Если регистр **A** равен 0, ничего не происходит.  
   Если регистр **A** **не равен 0**, устанавливает указатель инструкций на значение операнда (прыжок).

5. **`bxc` (код 4)**  
   Выполняет **побитовое XOR** между регистрами **B** и **C**.  
   Результат сохраняется в регистре **B**. Операнд **игнорируется**.

6. **`out` (код 5)**  
   Вычисляет значение операнда **по модулю 8** и **выводит его**.  
   Если программа выводит несколько значений, они соединяются через запятую.

7. **`bdv` (код 6)**  
   Работает так же, как **`adv`**, но результат сохраняется в регистре **B**.

8. **`cdv` (код 7)**  
   Работает так же, как **`adv`**, но результат сохраняется в регистре **C**.

---

## **Примеры работы инструкций**

- Если регистр **C** содержит `9`, программа `2,6` установит регистр **B** равным `1`.
- Если регистр **A** содержит `10`, программа `5,0,5,1,5,4` выведет `0,1,2`.
- Если регистр **A** содержит `2024`, программа `0,1,5,4,3,0` выведет `4,2,5,6,7,7,7,7,3,1,0` и обнулит регистр **A**.
- Если регистр **B** содержит `29`, программа `1,7` установит регистр **B** равным `26`.
- Если регистр **B** содержит `2024` и регистр **C** содержит `43690`, программа `4,0` установит регистр **B** равным `44354`.

---

## **Пример задачи**

Допустим, устройство отображает следующую информацию:

```
Register A: 729
Register B: 0
Register C: 0

Program: 0,1,5,4,3,0
```


**Задача**:  
Инициализировать регистры значениями `729`, `0` и `0`, затем выполнить программу и собрать все значения, которые выводятся через инструкцию `out`.

**Результат**:  
После выполнения программы устройство выведет:  
`4,6,3,5,6,3,5,2,1,0`.

---

## **Ваша задача**

Используя информацию, предоставленную отладчиком, выполните программу и объедините все выводимые значения в одну строку через запятую.

# --- Часть Вторая ---

Изучая руководство устройства более подробно, вы находите проблему: эта программа должна выводить копию самой себя! К сожалению, значение в регистре **A** оказалось повреждено. Вам нужно найти новое значение, с которым можно инициализировать регистр **A**, чтобы инструкции вывода программы воспроизвели точную копию самой программы.

### Пример:
```
Регистр A: 2024
Регистр B: 0
Регистр C: 0

Программа: 0,3,5,4,3,0
```


Эта программа выводит копию самой себя, если регистр **A** вместо этого инициализировать значением **117440**. (Оригинальное начальное значение регистра **A**, равное 2024, игнорируется.)

### Задача:

Найдите наименьшее положительное начальное значение для регистра **A**, которое заставит программу вывести точную копию самой себя.
