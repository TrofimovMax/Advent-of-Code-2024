# День 5: Очередь печати

Эльфы на Сатурне завершили свои поиски и предлагают вам проверить подвал Северного Полюса. Печатное оборудование занято как никогда в преддверии Рождества, и один из Эльфов просит вашей помощи.

**Проблема:** Новый сборник правил безопасности для запуска саней не печатается в правильном порядке. Эльфы предоставили список правил порядка страниц и набор обновлений, которые нужно распечатать. Ваша задача — проверить, соблюдаются ли правила для каждого обновления.

## Условия

Формат данных:
1. Первая часть содержит правила в формате `X|Y`, где страница `X` должна быть напечатана **до** страницы `Y`, если обе они присутствуют в обновлении.
2. Вторая часть содержит обновления, каждое из которых представляет собой список страниц для печати.

**Пример входных данных:**

```
47|53
97|13
97|61
97|47
75|29
61|13
75|53
29|13
97|29
53|29
61|53
97|53
61|29
47|13
75|47
97|75
47|61
75|61
47|29
75|13
53|13

75,47,61,53,29
97,61,53,29,13
75,29,13
75,97,47,61,53
61,13,29
97,13,75,29,47
```


### Пояснение

Первая часть определяет правила, например:
- `47|53` означает, что страница `47` должна быть напечатана **до** страницы `53`.

Вторая часть указывает страницы для печати в каждом обновлении, например:
- `75,47,61,53,29` — это обновление, включающее страницы `75`, `47`, `61`, `53`, `29`.

**Ваша задача:**
1. Для каждого обновления проверьте, соблюдаются ли все применимые правила порядка.
2. Если обновление корректное, найдите "среднюю" страницу (страница в центре списка).
3. Сложите значения всех средних страниц для корректных обновлений.

## Пример

В примере выше:
- Первое обновление `75,47,61,53,29` корректно, так как все правила соблюдаются.
- Второе обновление `97,61,53,29,13` также корректно.
- Четвёртое обновление `75,97,47,61,53` некорректно, так как нарушает правило `97|75`.

Для корректных обновлений средние страницы:
- `75,47,61,53,29` — средняя страница `61`.
- `97,61,53,29,13` — средняя страница `53`.
- `75,29,13` — средняя страница `29`.

Сумма средних страниц: `61 + 53 + 29 = 143`.

## Задача

Определите, какие обновления корректны. Что получится, если сложить все средние страницы корректных обновлений?

# Часть 2

Пока эльфы работают над печатью обновлений в правильном порядке, у вас есть время исправить остальные.

Для каждого из некорректно упорядоченных обновлений используйте правила порядка страниц, чтобы расположить номера страниц в правильном порядке. Например, для приведённых выше данных три некорректных обновления исправляются следующим образом:

1. `75,97,47,61,53` становится `97,75,47,61,53`.
2. `61,13,29` становится `61,29,13`.
3. `97,13,75,29,47` становится `97,75,47,29,13`.

После исправления некорректных обновлений, их средние страницы:
- `97,75,47,61,53` — средняя страница `47`.
- `61,29,13` — средняя страница `29`.
- `97,75,47,29,13` — средняя страница `47`.

Сумма средних страниц: `47 + 29 + 47 = 123`.

**Ваша задача:** Найдите обновления, которые изначально расположены в неправильном порядке. Что получится, если сложить средние страницы после их исправления?
